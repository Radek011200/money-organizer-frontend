import{_ as p,c as h,i as f,o as w,a as o,b as t,u as a,t as r,j as u,n as C,F as b,e as z,f as S,q as B,g as s,s as D,x,d as V}from"./index-Cp2leT6j.js";import{u as M}from"./category-_7hyEaxh.js";const N={class:"category-details"},j={key:0,class:"loading"},F={key:1,class:"error"},I={key:2,class:"not-found"},K={key:3,class:"category-card"},L={class:"category-header"},P={class:"category-info"},E={key:0,class:"info-row"},R={class:"value"},U={class:"info-row"},q={class:"value"},A={class:"info-row"},G={class:"value"},O={key:0,class:"subcategories"},T={key:0,class:"no-subcategories"},H={key:1,class:"subcategory-list"},J={__name:"CategoryDetailsView",setup(Q){const y=f(),n=S(),e=M(),c=h(()=>y.params.id),_=()=>{n.push({name:"category-edit",params:{id:c.value}})},v=async()=>{if(confirm("Czy na pewno chcesz usunąć tę kategorię?"))try{await e.deleteCategory(c.value),alert("Kategoria usunięta pomyślnie"),n.push({name:"categories"})}catch{alert("Błąd podczas usuwania kategorii")}},m=()=>{n.push({name:"categories"})};return w(async()=>{try{await e.fetchCategories(),await e.fetchCategory(c.value)}catch(d){console.error("Failed to fetch category details:",d)}}),(d,i)=>{var g;const k=B("router-link");return s(),o("div",N,[i[4]||(i[4]=t("h1",null,"Szczegóły kategorii",-1)),a(e).loading?(s(),o("div",j," Ładowanie szczegółów kategorii... ")):a(e).error?(s(),o("div",F,r(a(e).error),1)):a(e).category?(s(),o("div",K,[t("div",L,[t("h2",null,r(a(e).category.name),1),t("div",{class:C(["category-badge",a(e).category.isMain?"main":"sub"])},r(a(e).category.isMain?"Główna":"Podrzędna"),3)]),t("div",P,[!a(e).category.isMain&&a(e).category.parent_id?(s(),o("div",E,[i[0]||(i[0]=t("div",{class:"label"},"Kategoria nadrzędna:",-1)),t("div",R,r(((g=a(e).getCategoryById(a(e).category.parent_id))==null?void 0:g.name)||"N/A"),1)])):u("",!0),t("div",U,[i[1]||(i[1]=t("div",{class:"label"},"Utworzono:",-1)),t("div",q,r(new Date(a(e).category.created_at).toLocaleDateString()),1)]),t("div",A,[i[2]||(i[2]=t("div",{class:"label"},"Ostatnia aktualizacja:",-1)),t("div",G,r(new Date(a(e).category.updated_at).toLocaleDateString()),1)])]),a(e).category.isMain?(s(),o("div",O,[i[3]||(i[3]=t("h3",null,"Podkategorie",-1)),a(e).getSubCategories(a(e).category.id).length===0?(s(),o("div",T," Brak podkategorii ")):(s(),o("ul",H,[(s(!0),o(b,null,z(a(e).getSubCategories(a(e).category.id),l=>(s(),o("li",{key:l.id},[D(k,{to:{name:"category-details",params:{id:l.id}}},{default:x(()=>[V(r(l.name),1)]),_:2},1032,["to"])]))),128))]))])):u("",!0),t("div",{class:"actions"},[t("button",{onClick:m,class:"back-button"},"Powrót do listy"),t("button",{onClick:_,class:"edit-button"},"Edytuj"),t("button",{onClick:v,class:"delete-button"},"Usuń")])])):(s(),o("div",I," Kategoria nie znaleziona. "))])}}},Y=p(J,[["__scopeId","data-v-080dad56"]]);export{Y as default};
