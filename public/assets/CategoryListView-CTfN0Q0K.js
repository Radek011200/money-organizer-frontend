import{_ as B,r as x,c as k,o as V,a,b as t,w as F,v as K,n as d,u as v,d as z,t as r,F as $,e as j,f as L,g as i,h as g,j as M}from"./index-Cp2leT6j.js";import{u as N}from"./category-_7hyEaxh.js";const P={class:"category-list"},D={class:"controls"},S={class:"search-container"},W={class:"filter-container"},E={class:"filter-options"},U={key:0,class:"status-message loading"},I={key:1,class:"status-message error"},T={key:2,class:"status-message no-categories"},q={key:3},A={class:"category-section"},G={key:0,class:"no-categories-message"},Q={key:1,class:"category-cards"},R=["onClick"],H={class:"category-card-header"},J={class:"category-name"},O={class:"category-badges"},X={class:"category-card-actions"},Y=["onClick"],Z=["onClick"],tt={class:"category-section"},st={key:0,class:"no-categories-message"},et={key:1,class:"category-cards"},ot=["onClick"],at={class:"category-card-header"},it={class:"category-name"},nt={class:"category-badges"},lt={key:0,class:"category-card-details"},rt={class:"parent-category"},ct={class:"detail-value"},dt={class:"category-card-actions"},ut=["onClick"],vt=["onClick"],gt={__name:"CategoryListView",setup(pt){const l=N(),p=L(),u=x(""),n=x("all"),y=k(()=>{let o=l.categories;if(n.value==="income"?o=o.filter(s=>s.is_income):n.value==="expense"&&(o=o.filter(s=>!s.is_income)),u.value){const s=u.value.toLowerCase();o=o.filter(e=>e.name.toLowerCase().includes(s))}return o}),m=k(()=>y.value.filter(o=>o.isMain)),_=k(()=>y.value.filter(o=>!o.isMain)),b=o=>{p.push({name:"category-details",params:{id:o}})},C=o=>{p.push({name:"category-edit",params:{id:o}})},f=async o=>{if(confirm("Czy na pewno chcesz usunąć tę kategorię?"))try{await l.deleteCategory(o),alert("Kategoria usunięta pomyślnie")}catch{alert("Błąd podczas usuwania kategorii")}},h=()=>{p.push({name:"category-create"})};return V(async()=>{try{await l.fetchCategories()}catch(o){console.error("Failed to fetch categories:",o)}}),(o,s)=>(i(),a("div",P,[s[19]||(s[19]=t("h1",null,"Kategorie",-1)),t("div",D,[t("div",S,[F(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),type:"text",placeholder:"Szukaj kategorii...",class:"search-input"},null,512),[[K,u.value]])]),t("div",W,[s[4]||(s[4]=t("div",{class:"filter-label"},"Filtruj:",-1)),t("div",E,[t("button",{onClick:s[1]||(s[1]=e=>n.value="all"),class:d(["filter-button",{active:n.value==="all"}])}," Wszystkie ",2),t("button",{onClick:s[2]||(s[2]=e=>n.value="income"),class:d(["filter-button",{active:n.value==="income"}])}," Przychody ",2),t("button",{onClick:s[3]||(s[3]=e=>n.value="expense"),class:d(["filter-button",{active:n.value==="expense"}])}," Wydatki ",2)])]),t("button",{onClick:h,class:"create-button"},s[5]||(s[5]=[t("span",{class:"button-icon"},"+",-1),t("span",{class:"button-text"},"Dodaj Kategorię",-1)]))]),v(l).loading?(i(),a("div",U,s[6]||(s[6]=[t("div",{class:"loading-spinner"},null,-1),z(" Ładowanie kategorii... ")]))):v(l).error?(i(),a("div",I,[s[7]||(s[7]=t("span",{class:"error-icon"},"⚠️",-1)),z(" "+r(v(l).error),1)])):y.value.length===0?(i(),a("div",T,[s[8]||(s[8]=t("span",{class:"empty-icon"},"📋",-1)),s[9]||(s[9]=t("p",null,"Nie znaleziono kategorii.",-1)),t("button",{onClick:h,class:"create-button-inline"},"Dodaj pierwszą kategorię")])):(i(),a("div",q,[t("div",A,[s[13]||(s[13]=t("h2",null,"Kategorie główne",-1)),m.value.length===0?(i(),a("div",G," Brak kategorii głównych ")):(i(),a("div",Q,[(i(!0),a($,null,j(m.value,e=>(i(),a("div",{key:e.id,class:"category-card",onClick:c=>b(e.id)},[t("div",H,[t("h3",J,r(e.name),1),t("div",O,[s[10]||(s[10]=t("div",{class:"category-badge main"},"Główna",-1)),t("div",{class:d(["category-badge",e.is_income?"income":"expense"])},r(e.is_income?"Przychód":"Wydatek"),3)])]),t("div",X,[t("button",{onClick:g(c=>C(e.id),["stop"]),class:"action-button edit-button"},s[11]||(s[11]=[t("span",{class:"action-icon"},"✏️",-1),t("span",{class:"action-text"},"Edytuj",-1)]),8,Y),t("button",{onClick:g(c=>f(e.id),["stop"]),class:"action-button delete-button"},s[12]||(s[12]=[t("span",{class:"action-icon"},"🗑️",-1),t("span",{class:"action-text"},"Usuń",-1)]),8,Z)])],8,R))),128))]))]),t("div",tt,[s[18]||(s[18]=t("h2",null,"Podkategorie",-1)),_.value.length===0?(i(),a("div",st," Brak podkategorii ")):(i(),a("div",et,[(i(!0),a($,null,j(_.value,e=>{var c;return i(),a("div",{key:e.id,class:"category-card",onClick:w=>b(e.id)},[t("div",at,[t("h3",it,r(e.name),1),t("div",nt,[s[14]||(s[14]=t("div",{class:"category-badge sub"},"Podrzędna",-1)),t("div",{class:d(["category-badge",e.is_income?"income":"expense"])},r(e.is_income?"Przychód":"Wydatek"),3)])]),e.parent_id?(i(),a("div",lt,[t("div",rt,[s[15]||(s[15]=t("span",{class:"detail-label"},"Kategoria nadrzędna:",-1)),t("span",ct,r(((c=v(l).getCategoryById(e.parent_id))==null?void 0:c.name)||"N/A"),1)])])):M("",!0),t("div",dt,[t("button",{onClick:g(w=>C(e.id),["stop"]),class:"action-button edit-button"},s[16]||(s[16]=[t("span",{class:"action-icon"},"✏️",-1),t("span",{class:"action-text"},"Edytuj",-1)]),8,ut),t("button",{onClick:g(w=>f(e.id),["stop"]),class:"action-button delete-button"},s[17]||(s[17]=[t("span",{class:"action-icon"},"🗑️",-1),t("span",{class:"action-text"},"Usuń",-1)]),8,vt)])],8,ot)}),128))]))])]))]))}},mt=B(gt,[["__scopeId","data-v-722365c0"]]);export{mt as default};
