import{_ as k,r as w,c as C,o as L,a,b as s,w as N,v as D,u as d,d as y,t as i,F as S,e as A,f as V,g as r,h as _}from"./index-Cp2leT6j.js";import{u as F}from"./expense-B1I-Xo3m.js";import{u as B}from"./category-_7hyEaxh.js";const M={class:"expense-list"},$={class:"controls"},P={class:"search-container"},T={key:0,class:"status-message loading"},q={key:1,class:"status-message error"},I={key:2,class:"status-message no-expenses"},Q={key:3,class:"expense-cards"},R=["onClick"],U={class:"expense-card-header"},j={class:"expense-name"},z={class:"expense-amount"},G={class:"expense-card-details"},H={class:"expense-category"},J={class:"detail-value"},K={class:"expense-date"},O={class:"detail-value"},W={class:"expense-card-actions"},X=["onClick"],Y=["onClick"],Z={__name:"ExpenseListView",setup(ee){const o=F(),u=B(),c=V(),l=w(""),p=C(()=>{if(!l.value)return o.expenses;const t=l.value.toLowerCase();return o.expenses.filter(e=>{const n=m(e.category_id).toLowerCase();return e.name.toLowerCase().includes(t)||n.includes(t)})}),f=t=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)},g=t=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(t),m=t=>{if(!t)return"N/A";const e=u.categories.find(n=>n.id===t);return e?e.name:"N/A"},h=t=>{c.push({name:"expense-details",params:{id:t}})},b=t=>{c.push({name:"expense-edit",params:{id:t}})},E=async t=>{if(confirm("Are you sure you want to delete this expense?"))try{await o.deleteExpense(t),alert("Expense deleted successfully")}catch{alert("Error deleting expense")}},x=()=>{c.push({name:"expense-create"})};return L(async()=>{try{await u.fetchCategories(),await o.fetchExpenses()}catch(t){console.error("Failed to fetch data:",t)}}),(t,e)=>(r(),a("div",M,[e[10]||(e[10]=s("h1",null,"Expenses",-1)),s("div",$,[s("div",P,[N(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>l.value=n),type:"text",placeholder:"Search expenses...",class:"search-input"},null,512),[[D,l.value]])]),s("button",{onClick:x,class:"create-button"},e[1]||(e[1]=[s("span",{class:"button-icon"},"+",-1),s("span",{class:"button-text"},"Add Expense",-1)]))]),d(o).loading?(r(),a("div",T,e[2]||(e[2]=[s("div",{class:"loading-spinner"},null,-1),y(" Loading expenses... ")]))):d(o).error?(r(),a("div",q,[e[3]||(e[3]=s("span",{class:"error-icon"},"⚠️",-1)),y(" "+i(d(o).error),1)])):p.value.length===0?(r(),a("div",I,[e[4]||(e[4]=s("span",{class:"empty-icon"},"📋",-1)),e[5]||(e[5]=s("p",null,"No expenses found.",-1)),s("button",{onClick:x,class:"create-button-inline"},"Add your first expense")])):(r(),a("div",Q,[(r(!0),a(S,null,A(p.value,n=>(r(),a("div",{key:n.id,class:"expense-card",onClick:v=>h(n.id)},[s("div",U,[s("h3",j,i(n.name),1),s("div",z,i(g(n.amount)),1)]),s("div",G,[s("div",H,[e[6]||(e[6]=s("span",{class:"detail-label"},"Category:",-1)),s("span",J,i(m(n.category_id)),1)]),s("div",K,[e[7]||(e[7]=s("span",{class:"detail-label"},"Date:",-1)),s("span",O,i(f(n.date)),1)])]),s("div",W,[s("button",{onClick:_(v=>b(n.id),["stop"]),class:"action-button edit-button"},e[8]||(e[8]=[s("span",{class:"action-icon"},"✏️",-1),s("span",{class:"action-text"},"Edit",-1)]),8,X),s("button",{onClick:_(v=>E(n.id),["stop"]),class:"action-button delete-button"},e[9]||(e[9]=[s("span",{class:"action-icon"},"🗑️",-1),s("span",{class:"action-text"},"Delete",-1)]),8,Y)])],8,R))),128))]))]))}},oe=k(Z,[["__scopeId","data-v-48aa5d8b"]]);export{oe as default};
