import{l as i,m as p}from"./index-Cp2leT6j.js";const a=i.create({baseURL:"http://localhost:8000/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),r={getExpenses(){return a.get("/expenses")},getExpense(e){return a.get(`/expenses/${e}`)},createExpense(e){return a.post("/expenses",e)},updateExpense(e,s){return a.put(`/expenses/${e}`,s)},deleteExpense(e){return a.delete(`/expenses/${e}`)}},d=p("expense",{state:()=>({expenses:[],expense:null,loading:!1,error:null}),getters:{getExpenseById:e=>s=>e.expenses.find(t=>t.id===parseInt(s))},actions:{async fetchExpenses(){this.loading=!0;try{const e=await r.getExpenses();this.expenses=e.data.expenses,this.error=null}catch(e){this.error=e.message||"Nie udało się pobrać wydatków",console.error("Błąd podczas pobierania wydatków:",e)}finally{this.loading=!1}},async fetchExpense(e){this.loading=!0;try{const s=await r.getExpense(e);this.expense=s.data.expense,this.error=null}catch(s){this.error=s.message||`Nie udało się pobrać wydatku o ID ${e}`,console.error(`Błąd podczas pobierania wydatku o ID ${e}:`,s)}finally{this.loading=!1}},async createExpense(e){this.loading=!0;try{const s=await r.createExpense(e);return this.expenses.push(s.data.expense),this.error=null,s.data.expense}catch(s){throw this.error=s.message||"Nie udało się utworzyć wydatku",console.error("Błąd podczas tworzenia wydatku:",s),s}finally{this.loading=!1}},async updateExpense(e,s){this.loading=!0;try{const t=await r.updateExpense(e,s),n=this.expenses.findIndex(o=>o.id===parseInt(e));return n!==-1&&(this.expenses[n]=t.data.expense),this.error=null,t.data.expense}catch(t){throw this.error=t.message||`Nie udało się zaktualizować wydatku o ID ${e}`,console.error(`Błąd podczas aktualizacji wydatku o ID ${e}:`,t),t}finally{this.loading=!1}},async deleteExpense(e){this.loading=!0;try{await r.deleteExpense(e),this.expenses=this.expenses.filter(s=>s.id!==parseInt(e)),this.error=null}catch(s){throw this.error=s.message||`Nie udało się usunąć wydatku o ID ${e}`,console.error(`Błąd podczas usuwania wydatku o ID ${e}:`,s),s}finally{this.loading=!1}}}});export{d as u};
