import{_ as k,r as C,c as x,o as L,a as n,b as s,w as N,v as z,u as d,d as _,t as r,F as S,e as V,f as j,g as i,h as f}from"./index-Cp2leT6j.js";import{u as B}from"./deposit-CE66YNY9.js";import{u as F}from"./category-_7hyEaxh.js";const A={class:"deposit-list"},M={class:"controls"},W={class:"search-container"},$={key:0,class:"status-message loading"},E={key:1,class:"status-message error"},P={key:2,class:"status-message no-deposits"},T={key:3,class:"deposit-cards"},U=["onClick"],q={class:"deposit-card-header"},I={class:"deposit-name"},K={class:"deposit-amount"},Q={class:"deposit-card-details"},R={class:"deposit-category"},G={class:"detail-value"},H={class:"deposit-date"},J={class:"detail-value"},O={class:"deposit-card-actions"},X=["onClick"],Y=["onClick"],Z={__name:"DepositListView",setup(tt){const a=B(),u=F(),l=j(),c=C(""),p=x(()=>{if(!c.value)return a.deposits;const e=c.value.toLowerCase();return a.deposits.filter(t=>{const o=m(t.category_id).toLowerCase();return t.name.toLowerCase().includes(e)||o.includes(e)})}),w=e=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},g=e=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),m=e=>{if(!e)return"N/A";const t=u.categories.find(o=>o.id===e);return t?t.name:"N/A"},h=e=>{l.push({name:"deposit-details",params:{id:e}})},D=e=>{l.push({name:"deposit-edit",params:{id:e}})},b=async e=>{if(confirm("Czy na pewno chcesz usunÄ…Ä‡ tÄ™ wpÅ‚atÄ™?"))try{await a.deleteDeposit(e),alert("WpÅ‚ata usuniÄ™ta pomyÅ›lnie")}catch{alert("BÅ‚Ä…d podczas usuwania wpÅ‚aty")}},v=()=>{l.push({name:"deposit-create"})};return L(async()=>{try{await u.fetchCategories(),await a.fetchDeposits()}catch(e){console.error("Failed to fetch data:",e)}}),(e,t)=>(i(),n("div",A,[t[10]||(t[10]=s("h1",null,"WpÅ‚aty",-1)),s("div",M,[s("div",W,[N(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),type:"text",placeholder:"Szukaj wpÅ‚at...",class:"search-input"},null,512),[[z,c.value]])]),s("button",{onClick:v,class:"create-button"},t[1]||(t[1]=[s("span",{class:"button-icon"},"+",-1),s("span",{class:"button-text"},"Dodaj WpÅ‚atÄ™",-1)]))]),d(a).loading?(i(),n("div",$,t[2]||(t[2]=[s("div",{class:"loading-spinner"},null,-1),_(" Åadowanie wpÅ‚at... ")]))):d(a).error?(i(),n("div",E,[t[3]||(t[3]=s("span",{class:"error-icon"},"âš ï¸",-1)),_(" "+r(d(a).error),1)])):p.value.length===0?(i(),n("div",P,[t[4]||(t[4]=s("span",{class:"empty-icon"},"ğŸ“‹",-1)),t[5]||(t[5]=s("p",null,"Nie znaleziono wpÅ‚at.",-1)),s("button",{onClick:v,class:"create-button-inline"},"Dodaj pierwszÄ… wpÅ‚atÄ™")])):(i(),n("div",T,[(i(!0),n(S,null,V(p.value,o=>(i(),n("div",{key:o.id,class:"deposit-card",onClick:y=>h(o.id)},[s("div",q,[s("h3",I,r(o.name),1),s("div",K,r(g(o.amount)),1)]),s("div",Q,[s("div",R,[t[6]||(t[6]=s("span",{class:"detail-label"},"Kategoria:",-1)),s("span",G,r(m(o.category_id)),1)]),s("div",H,[t[7]||(t[7]=s("span",{class:"detail-label"},"Data:",-1)),s("span",J,r(w(o.date)),1)])]),s("div",O,[s("button",{onClick:f(y=>D(o.id),["stop"]),class:"action-button edit-button"},t[8]||(t[8]=[s("span",{class:"action-icon"},"âœï¸",-1),s("span",{class:"action-text"},"Edytuj",-1)]),8,X),s("button",{onClick:f(y=>b(o.id),["stop"]),class:"action-button delete-button"},t[9]||(t[9]=[s("span",{class:"action-icon"},"ğŸ—‘ï¸",-1),s("span",{class:"action-text"},"UsuÅ„",-1)]),8,Y)])],8,U))),128))]))]))}},at=k(Z,[["__scopeId","data-v-9569b7d1"]]);export{at as default};
