import{l as p,m as n}from"./index-Cp2leT6j.js";const o=p.create({baseURL:"http://localhost:8000/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),i={getDeposits(){return o.get("/deposits")},getDeposit(t){return o.get(`/deposits/${t}`)},createDeposit(t){return o.post("/deposits",t)},updateDeposit(t,e){return o.put(`/deposits/${t}`,e)},deleteDeposit(t){return o.delete(`/deposits/${t}`)}},l=n("deposit",{state:()=>({deposits:[],deposit:null,loading:!1,error:null}),getters:{getDepositById:t=>e=>t.deposits.find(s=>s.id===parseInt(e))},actions:{async fetchDeposits(){this.loading=!0;try{const t=await i.getDeposits();this.deposits=t.data.deposits,this.error=null}catch(t){this.error=t.message||"Nie udało się pobrać wpłat",console.error("Błąd podczas pobierania wpłat:",t)}finally{this.loading=!1}},async fetchDeposit(t){this.loading=!0;try{const e=await i.getDeposit(t);this.deposit=e.data.deposit,this.error=null}catch(e){this.error=e.message||`Nie udało się pobrać wpłaty o ID ${t}`,console.error(`Błąd podczas pobierania wpłaty o ID ${t}:`,e)}finally{this.loading=!1}},async createDeposit(t){this.loading=!0;try{const e=await i.createDeposit(t);return this.deposits.push(e.data.deposit),this.error=null,e.data.deposit}catch(e){throw this.error=e.message||"Nie udało się utworzyć wpłaty",console.error("Błąd podczas tworzenia wpłaty:",e),e}finally{this.loading=!1}},async updateDeposit(t,e){this.loading=!0;try{const s=await i.updateDeposit(t,e),a=this.deposits.findIndex(r=>r.id===parseInt(t));return a!==-1&&(this.deposits[a]=s.data.deposit),this.error=null,s.data.deposit}catch(s){throw this.error=s.message||`Nie udało się zaktualizować wpłaty o ID ${t}`,console.error(`Błąd podczas aktualizacji wpłaty o ID ${t}:`,s),s}finally{this.loading=!1}},async deleteDeposit(t){this.loading=!0;try{await i.deleteDeposit(t),this.deposits=this.deposits.filter(e=>e.id!==parseInt(t)),this.error=null}catch(e){throw this.error=e.message||`Nie udało się usunąć wpłaty o ID ${t}`,console.error(`Błąd podczas usuwania wpłaty o ID ${t}:`,e),e}finally{this.loading=!1}}}});export{l as u};
